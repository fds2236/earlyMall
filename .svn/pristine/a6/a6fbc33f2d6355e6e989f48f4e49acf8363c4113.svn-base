<%@ page language="java" contentType="text/html; charset=EUC-KR"
    pageEncoding="EUC-KR"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<!DOCTYPE html>
<html>
<script src="http://code.jquery.com/jquery-3.5.1.min.js"></script>
<div id="admin_header" class="frame_top">
	<button id="logOut_btn">로그아웃</button>
</div>
<div id="admin_cate_frame" class="frame_cate">
	<div id="admin_cate"></div>
</div>



<style>
.frame_top {
	width : 100%;
	height : 50px;
	background-color:#b5f3c9;
}
#logOut_btn {
	float : right;
	margin : 10px;
}
.frame_cate {
	width : 150px;
	min-height : 700px;
	background-color:lightGray;
}
#admin_cate {
	width : 145px;
	height : 300px;
}
.cate_list {
	padding : 10px;
	cursor : pointer;
}
.frame_top, .frame_cate {
	float : left;
}

</style>

<script type="text/javascript">
$(document).ready(function() {
	setCate();
	
	$("#logOut_btn").click(function() {
		logOut();
	});
});

$(document).on("click", ".cate_list", function(e) {
	movePage($(e.target).data("id"));
});

function setCate() {
	
	$.ajax({
		method: "GET",
	    url: "/admin-cate",
	    data: {},
	    success: function(data) {
	    	if(data.result == "SUCCESS") {
	    		setCateDiv(data.cateList);
	    	}
        },
	    error: function() {
	          console.log('통신실패!!');
        }
	});
}

function setCateDiv(list) {
	var html = "";
	for(var i = 0; i < list.length; i++) {
		html += "<div data-id='" + list[i].DID + "'class='cate_list'>" + list[i].DNAME + "</div>";
	}
	$("#admin_cate").append(html);
}

function movePage(cateId) {
	var url = "";
	switch(cateId) {
		case "10" : url = ""; break;
		case "10" : url = ""; break;
		case "20" : url = ""; break;
		case "30" : url = ""; break;
		case "40" : url = ""; break;
		case "50" : url = ""; break;
	}
// 	window.location.href=url;
}

function logOut() {
	$.ajax({
		method: "POST",
	    url: "/auth/logout",
	    data: {},
	    success: function(data) {
	    	if(data.result == "SUCCESS") {
	    		alert(data.message);
	    		window.location.href='/'
	    	}
        },
	    error: function() {
	          console.log('통신실패!!');
        }
	});
}
</script>


</html>